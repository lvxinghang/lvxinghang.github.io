





## 静态分析Android程序

### 代码定位技巧

1. **入口分析法**

   ​	在反编译出的`AndroidManifest.xml`文件中找主Activity，然后查看其所在类的OnCreate()的代码，追踪软件的执行流程。

2. **信息反馈法**

   ​	先运行程序，然后讲程序运行时给出的反馈信息作为突破口来寻找关键代码。程序中用到的字符串会存储在String.xml

   文件中或者被硬编码到程序代码中。

3. **特征函数法**

   ​	弹出注册码错误的提示信息需要调用`Toast.MakeText().Show()`方法， 在反汇编代码中直接搜索“Toast” 定位调用代码。如果代码中使用了按钮， 必然会为其注册按钮响应事件。 在反编译代码中搜索`OnClickListener()`就可以列出所有的按钮事件。



## 动态分析Android程序

### 动态分析框架

​	DroidBox：主要用于对敏感API与系统网络流量进行监控， 以及对程序进行简单的模糊测试（Fuzz Testing ）。(过时)

​	MobSF：同时支持Android、iOS、Windows平台上的软件分析， 它的测试框架同时支持静态分析、动态分析WebAPI				   测试。

 ### 动态分析技巧

1. **代码注入法**

   ​	先反编译Android程序，然后在反汇编出来的smali文件中添加Log调用的代码，最后再重新打包程序运行，查看输出结果。

2. **栈跟踪法**

   ​	工程量大的时候，代码注入法就会显得非常乏力(不断地手动注入Log输出代码)。栈跟踪法主要操作是手动向反汇编后的smli文件中添加用于输出栈跟踪信息的代码，`采用栈跟踪法时只需要知道大概的代码注入点， 而且注入代码后的反馈信息比Log注入要详细得多`。

3. **Method Profiling(方法剖析)**

   ​	在程序运行时记录每个被调用的API的名称，只需查看API的调用序列， 就可以了解这段代码的用途。

4. **UI检查**

   ​	`dumpsys`命令：使用该命令可以打印当前系统中运行的所有程序的组件信息。

### Hook框架Xposed



### 动态注入

​	动态注入指将一段程序或一个完整的可执行文件加载到目标程序中。

​	动态注入与Hook的区别：



​	





























